# オペレータ更新機能仕様
オペレータランクの更新を行う

## 機能の対象
- 管理者

## 使用テーブル構成
1. **オペレータランク情報**
   - **OperatorRankモデル**（OperatorRanksテーブル）
     - フィールド:
       - `name`: ランク名
       - `priority`: 優先度
       - `created_at`: 作成日時
       - `updated_at`: 更新日時
       - `deleted_at`: 削除日時

     - モデルファイル: `OperatorRank.php`
     - マイグレーションファイル: `05_create_operator_ranks_table.php`
     - ユニークキー: `name`
     - インデックス: `name`
     - 外部キー: なし

## バリデーションルール
- **OperatorRankテーブル**
  1. `name`: 必須, 32文字以内

## 機能を実行するサービスクラス
- 更新機能: OperatorRankUpdateService

## 機能のビジネスロジック
1. 更新前チェック
   - 対象ランクの存在確認: 指定された`name`がOperatorRanksテーブルに存在することを確認

2. リクエストデータのバリデーション
   - 必須項目の確認: `name`が含まれていることを確認
   - 文字数制限の確認:
     - `name`は32文字以内

3. オペレータランク情報の更新
   - OperatorRanksテーブルの更新:
     - `name`, `priority`を更新

4. レスポンス生成
   - 更新されたオペレータランク情報を返却: `name`, `priority`を含む
   - エラー発生時は適切なステータスコードとメッセージを返却:
     - バリデーションエラーの場合は422 Unprocessable Entity
     - その他のエラーは500 Internal Server Error

## エラーハンドリング
- 成功:
  - オペレータランク情報が正常に更新された場合
    - HTTPステータスコード: 200 OK
    - レスポンス: 更新されたオペレータランク情報（name, priority）を返却
- 失敗:
  - バリデーションエラー
    - HTTPステータスコード: 422 Unprocessable Entity
    - エラーメッセージ: 各項目のバリデーションエラー内容を返却
  - ランク不在エラー
    - HTTPステータスコード: 404 Not Found
    - エラーメッセージ: "指定されたランクが見つかりません"
  - データベースエラー
    - HTTPステータスコード: 500 Internal Server Error
    - エラーメッセージ: "オペレータランク情報の更新に失敗しました。システム管理者に連絡してください"

## テストケース
1. 正常系
   - 一部項目のみ更新
     - 期待結果: 200 OK、更新されたオペレータランク情報が返却される

2. 異常系
   - バリデーションエラー
     - nameが32文字を超える
       - 期待結果: 422 Unprocessable Entity、エラーメッセージ: "nameは32文字以内で入力してください"
   - ランク不在エラー
     - 存在しないnameを指定
       - 期待結果: 404 Not Found、エラーメッセージ: "指定されたランクが見つかりません"

## その他
- オペレータランクの更新はWebUIからAJAXで送信されます。 
